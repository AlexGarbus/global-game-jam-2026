[gd_scene format=3 uid="uid://5om7reag0osd"]

[ext_resource type="Script" uid="uid://bw6tlvsy3jiyu" path="res://main/scenes/main_scene.gd" id="1_2hrc5"]
[ext_resource type="Environment" uid="uid://bcfjx3rkeuell" path="res://environments/boss/boss_environment.tres" id="2_v1c0h"]
[ext_resource type="PackedScene" uid="uid://cwymdjqwhe33l" path="res://common/scenes/pixelated_viewport_container.tscn" id="3_jxkan"]
[ext_resource type="Material" uid="uid://go44ro7nx67p" path="res://main/scenes/end/import/model/player_material.tres" id="3_jypvo"]
[ext_resource type="AudioStream" uid="uid://dde6tfxpc0ma2" path="res://entities/player/audio/bubble_bounce.wav" id="4_2e7ko"]
[ext_resource type="Material" uid="uid://c6w87asl6twpe" path="res://entities/enemies/boss/boss_material.tres" id="4_amjkb"]
[ext_resource type="AudioStream" uid="uid://4mkcmoa83pj1" path="res://entities/player/audio/shoot.wav" id="5_a0no1"]
[ext_resource type="ArrayMesh" uid="uid://pv5ljqods4b" path="res://entities/enemies/boss/pregnant_boss.obj" id="5_bdyoo"]
[ext_resource type="PackedScene" uid="uid://wqt7vynq0unn" path="res://entities/player/models/hair.glb" id="6_bdyoo"]
[ext_resource type="PackedScene" uid="uid://c877n6ydhad8p" path="res://entities/player/models/player.glb" id="6_jypvo"]
[ext_resource type="PackedScene" uid="uid://o6r0v4cvfmyi" path="res://entities/player/models/mask.glb" id="7_amjkb"]

[sub_resource type="Animation" id="Animation_bdyoo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(1, -0.5, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(1, 1, 1)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, -0.017453292, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-1, 0, 0)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:scale")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(1, 1, 1)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:visible")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0.64, 0)]
}
tracks/9/type = "value"
tracks/9/imported = false
tracks/9/enabled = true
tracks/9/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:rotation")
tracks/9/interp = 1
tracks/9/loop_wrap = true
tracks/9/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/10/type = "value"
tracks/10/imported = false
tracks/10/enabled = true
tracks/10/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/PregnantBoss:surface_material_override/0")
tracks/10/interp = 1
tracks/10/loop_wrap = true
tracks/10/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_amjkb")]
}
tracks/11/type = "value"
tracks/11/imported = false
tracks/11/enabled = true
tracks/11/path = NodePath("FadeLayer:visible")
tracks/11/interp = 1
tracks/11/loop_wrap = true
tracks/11/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/12/type = "value"
tracks/12/imported = false
tracks/12/enabled = true
tracks/12/path = NodePath("FadeLayer/CanvasModulate:color")
tracks/12/interp = 1
tracks/12/loop_wrap = true
tracks/12/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_amjkb"]
resource_name = "autoplay"
length = 14.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0), Vector3(-1.5707964, 1.5707964, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1, 2, 3, 3.3, 4, 4.2, 4.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(1, -0.5, 0), Vector3(1, -0.5, 0), Vector3(1.5, 0, 0), Vector3(1.5, 0, 0), Vector3(2, 0, 0), Vector3(2, 0, 0), Vector3(0.5000018, 0, 0), Vector3(-1, 0, -0.25)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 3, 3.3, 4, 4.2, 4.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(1, 1, 1), Vector3(1, 1, 1), Vector3(1, 0.5, 1), Vector3(1, 0.5, 1), Vector3(1, 0.7499997, 1), Vector3(0.1, 0.1, 0.1)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 4.4, 8),
"transitions": PackedFloat32Array(1, 0.25, 1),
"update": 0,
"values": [Vector3(0, -0.017453292, -0.2617994), Vector3(0, -0.7853982, -0.2617994), Vector3(0, 31.43338, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("PixelatedViewportContainer/SubViewport/PlayerPivot:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 4.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 4.4, 4.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-1, 0, 0), Vector3(-1, 0, 0), Vector3(0, 0, 0)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:scale")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(4.8, 5.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.05, 0.05, 0.05), Vector3(1, 1, 1)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:visible")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0, 4.8),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(10, 10.4, 11),
"transitions": PackedFloat32Array(0.5, 2, 1),
"update": 0,
"values": [Vector3(0, 0.64, 0), Vector3(-0.5, 0.75, 0), Vector3(-1, -1.75, 0)]
}
tracks/9/type = "value"
tracks/9/imported = false
tracks/9/enabled = true
tracks/9/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/Mask:rotation")
tracks/9/interp = 1
tracks/9/loop_wrap = true
tracks/9/keys = {
"times": PackedFloat32Array(10, 11),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 3.1415927)]
}
tracks/10/type = "value"
tracks/10/imported = false
tracks/10/enabled = true
tracks/10/path = NodePath("PixelatedViewportContainer/SubViewport/BossPivot/PregnantBoss:surface_material_override/0")
tracks/10/interp = 1
tracks/10/loop_wrap = true
tracks/10/keys = {
"times": PackedFloat32Array(0, 10),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [ExtResource("4_amjkb"), ExtResource("3_jypvo")]
}
tracks/11/type = "value"
tracks/11/imported = false
tracks/11/enabled = true
tracks/11/path = NodePath("FadeLayer:visible")
tracks/11/interp = 1
tracks/11/loop_wrap = true
tracks/11/keys = {
"times": PackedFloat32Array(0, 12, 14),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}
tracks/12/type = "value"
tracks/12/imported = false
tracks/12/enabled = true
tracks/12/path = NodePath("FadeLayer/CanvasModulate:color")
tracks/12/interp = 1
tracks/12/loop_wrap = true
tracks/12/keys = {
"times": PackedFloat32Array(12, 12.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/13/type = "method"
tracks/13/imported = false
tracks/13/enabled = true
tracks/13/path = NodePath(".")
tracks/13/interp = 1
tracks/13/loop_wrap = true
tracks/13/keys = {
"times": PackedFloat32Array(14),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [true],
"method": &"finish"
}]
}
tracks/14/type = "audio"
tracks/14/imported = false
tracks/14/enabled = true
tracks/14/path = NodePath("AnimationPlayer/AudioStreamPlayer")
tracks/14/interp = 1
tracks/14/loop_wrap = true
tracks/14/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("4_2e7ko")
}, {
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("5_a0no1")
}],
"times": PackedFloat32Array(4, 10)
}
tracks/14/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bdyoo"]
_data = {
&"RESET": SubResource("Animation_bdyoo"),
&"autoplay": SubResource("Animation_amjkb")
}

[node name="End" type="Node" unique_id=1210590907]
script = ExtResource("1_2hrc5")
metadata/_custom_type_script = "uid://bw6tlvsy3jiyu"

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=110852849]
libraries/ = SubResource("AnimationLibrary_bdyoo")
autoplay = &"autoplay"

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="AnimationPlayer" unique_id=1151554879]

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=1109520804]
environment = ExtResource("2_v1c0h")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=999822584]
transform = Transform3D(0.5, 0.7071068, -0.49999997, 0.7071068, -5.1982045e-08, 0.70710677, 0.49999997, -0.70710677, -0.50000006, 0, 0, 0)
light_energy = 0.5

[node name="PixelatedViewportContainer" parent="." unique_id=1629097868 instance=ExtResource("3_jxkan")]

[node name="SubViewport" type="SubViewport" parent="PixelatedViewportContainer" unique_id=446133743]
handle_input_locally = false
size = Vector2i(256, 144)
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="PixelatedViewportContainer/SubViewport" unique_id=1367508080]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, -2)
projection = 1
current = true
size = 3.0

[node name="PlayerPivot" type="Node3D" parent="PixelatedViewportContainer/SubViewport" unique_id=1243670629]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, -0.5, 0)

[node name="Player" parent="PixelatedViewportContainer/SubViewport/PlayerPivot" unique_id=1940571557 instance=ExtResource("6_jypvo")]

[node name="Mask" parent="PixelatedViewportContainer/SubViewport/PlayerPivot/Player" unique_id=82053084 instance=ExtResource("7_amjkb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, -0.125)

[node name="Hair" parent="PixelatedViewportContainer/SubViewport/PlayerPivot/Player" unique_id=1754074478 instance=ExtResource("6_bdyoo")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.124, 0)

[node name="BossPivot" type="Node3D" parent="PixelatedViewportContainer/SubViewport" unique_id=1101893740]
transform = Transform3D(0.9998477, 0, -0.017452406, 0, 1, 0, 0.017452406, 0, 0.9998477, -1, 0, 0)

[node name="PregnantBoss" type="MeshInstance3D" parent="PixelatedViewportContainer/SubViewport/BossPivot" unique_id=821956161]
mesh = ExtResource("5_bdyoo")
surface_material_override/0 = ExtResource("4_amjkb")

[node name="Mask" parent="PixelatedViewportContainer/SubViewport/BossPivot" unique_id=450210998 instance=ExtResource("7_amjkb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.64, 0)
visible = false

[node name="FadeLayer" type="CanvasLayer" parent="." unique_id=1187487500]
visible = false

[node name="ColorRect" type="ColorRect" parent="FadeLayer" unique_id=1478057535]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.6745098, 0, 0.16470589, 1)

[node name="CanvasModulate" type="CanvasModulate" parent="FadeLayer" unique_id=844478565]
